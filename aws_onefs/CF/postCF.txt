#################
post CF install setup v1.0 - add nodes
#################

###using aws profile --profile=<profile_id>
###aws id <aws_id>

export aws_sdk_profile=<profile_id>
aws ec2 describe-instances  --profile=$aws_sdk_profile  --query 'Reservations[*].Instances[*].{Instance:InstanceId,AZ:Placement.AvailabilityZone,Name:Tags[?Key==`Name`]|[0].Value,State:State.Name,IP:PublicIpAddress, IP2:PrivateIpAddress}'     --output table 



isi status
isi auth user list
isi devices node list

### to shut a node down
isi cluster shutdown --node-lnn=<node-lnn>


isi devices node add SV200-930073-0001 --async

###Check the cluster status by running the following command and wait for the cluster and node health to report a status of OK before you proceed

isi status

###Run the following command to add the third node:

isi devices node add SV200-930073-0002 --async

###Check the cluster status by running the following command and wait for the cluster and node health to report a status of OK before proceeding

isi status

###Run the following command to add the fourth node:

isi devices node add SV200-930073-0003 --async

###Check the cluster status by running the following command and wait for the cluster and node health to report a status of OK before proceeding

isi status



isi network groupnets view groupnet0
isi network subnets view groupnet0.subnet0 
isi network pools view groupnet0.subnet0.pool0 

isi network interfaces list

isi network subnets modify groupnet0.subnet0 --sc-service-addrs=X.X.X.X

isi network subnets modify groupnet0.subnet0 --sc-service-name=ssip3.foo.com.ec2.internal

isi network pools modify  groupnet0.subnet0.pool0 --sc-dns-zone=sc3.foo.com.ec2.internal

isi network subnets view groupnet0.subnet0 
isi network pools view groupnet0.subnet0.pool0 

isi_for_array ifconfig | grep 222 -A 2 -B 6

nslookup sc1.foo.com.ec2.internal 10.15.2.222


isi services nfs enable
isi services smb enable
isi services
